<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body>
    <header><%- include('../partials/header'); %></header>
    <main class="w-screen">
      <% if (user) { %> <% if (user.role == "admin") { %>
      <div class="flex">
        <a class="w-screen flex justify-end mt-5 mr-16" href="/category/add"
          ><button class="btn">Add category</button></a
        >
      </div>
      <% } %> <% } %>
      <div class="w-full">
        <div class="grid grid-cols-4 gap-5 ml-24 mr-24 mt-5 mb-24">
          <% cates.forEach(function(category) { %>
          <div class="mt-3 relative">
            <% if (category.length == 0) { %>
            <form action="/category/delete/<%= category._id %>" method="post">
              <button class="btn btn-sm btn-circle -right-3 -top-3 absolute">âœ•</button>
            </form>
            <% } %>
            <a href="/category/<%= category._id %>">
              <div class="w-full aspect-square border">
                <img src="<%=category.image%>" />
              </div>
              <div class="flex justify-between">
                <div class="font-semibold text-xl"><%= category.name %></div>
                <div class="mt-1"><span><%= category.courses.length %></span> courses</div>
              </div>
            </a>
          </div>
          <% }) %>
        </div>
      </div>
    </main>
    <footer><%- include('../partials/footer'); %></footer>
  </body>
</html>
